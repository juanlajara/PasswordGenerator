<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Dre's Password Generator</title>
		<meta charset="utf-8" />
		<!-- Key Icon -->
		<link rel="icon" type="image/svg" href="./assets/images/key-solid.svg" />
		<!-- Reset CSS-->
		<link rel="stylesheet" type="text/css" href="./assets/css/reset.css" />
		<!-- BootStrap-->
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
			integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
			crossorigin="anonymous"
		/>
	</head>
	<body>
		<h1>Password Generator</h1>

		<button type="button" onclick="RunPWGen()">
			Create Password
		</button>
		<p id="demo"></p>
	</body>
	<script>
		// Set  Variables
		var lwrCaseVal = range("a", "z");
		var upCaseVal = range("A", "Z");
		var incNumVal = range("0", "9");
		var SpecialVal = range(" ", "/").concat(
			range(":", "@"),
			range("[", "`"),
			range("{", "~")
		);
		var results = [];
		//Run Password Generator
		function RunPWGen() {
			var PwLengthVal = prompt(
				"How long would you like it (Min 8 / Max 128) ?",
				8
			);

			// Enforce the range Max & Min
			if (PwLengthVal != null && PwLengthVal >= 8 && PwLengthVal <= 128) {
				// Ask the user for what to include
				var useLwrCase = confirm("Include Lowercase Cancel = No  Ok = Yes ? ");
				var useUpperCase = confirm(
					"Include Uppercase Cancel = No  Ok = Yes ? "
				);
				var useNums = confirm("Include Numeric Cancel = No  Ok = Yes ? ");
				var useSpecial = confirm(
					"Include Special Characters Cancel = No  Ok = Yes ? "
				);
				// Add Selected Arrays to Results
				if (PwLengthVal > 95) {
					results.push(...results);
				}
				if (useLwrCase == true) {
					results.push(...lwrCaseVal);
				}

				if (useUpperCase == true) {
					results.push(...upCaseVal);
				}

				if (useNums == true) {
					results.push(...incNumVal);
				}

				if (useSpecial == true) {
					results.push(...SpecialVal);
				}
				// Validate user selected at least One Character Option
				if (results.length != 0) {
					generatePw(results, PwLengthVal);
				}
				// If user selected a range outside the min/max or No Character Option
				else {
					outOfRangeOrCancel();
				}
			} else {
				outOfRangeOrCancel();
			}
		}

		function generatePw(results, PwLengthVal) {
			function shuffle(array) {
				array.sort(() => Math.random() - 0.5);
			}

			shuffle(results);
			document.getElementById("demo").innerHTML =
				"Password: " + results.slice(0, PwLengthVal).join("");
		}

		function outOfRangeOrCancel() {
			document.getElementById("demo").innerHTML =
				"Ops!! Either your selected password length is outside the range: 8(min)-128(max); or you Canceled all subsequent character options";
		}

		function range(start, stop) {
			var result = [];
			for (
				var idx = start.charCodeAt(0), end = stop.charCodeAt(0);
				idx <= end;
				++idx
			) {
				result.push(String.fromCharCode(idx));
			}
			return result;
		}
	</script>
</html>
