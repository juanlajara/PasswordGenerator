<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Dre's Password Generator</title>
		<meta charset="utf-8" />
		<!-- Key Icon -->
		<link rel="icon" type="image/svg" href="./assets/images/key-solid.svg" />
		<!-- Reset CSS-->
		<link rel="stylesheet" type="text/css" href="./assets/css/reset.css" />
		<!-- BootStrap-->
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
			integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
			crossorigin="anonymous"
		/>
		<script>
			// Start the Password Generator

			var lwrCaseVal = range("a", "z");
			var upCaseVal = range("A", "Z");
			var incNumVal = range("0", "9");
			var SpecialVal = range(" ", "/").concat(
				range(":", "@"),
				range("[", "`"),
				range("{", "~")
			);
			var results = [];

			function RunPWGen() {
				var PwLengthVal = prompt(
					"How long would you like it (Min 8 / Max 128) ?",
					8
				);

				// Enforce the range Max & Min
				if (PwLengthVal != null && PwLengthVal >= 8 && PwLengthVal <= 128) {
					var useLwrCase = prompt("Include Lowercase Y/N ? ", "Y");
					var useUpperCase = prompt("Include Uppercase Y/N ? ", "Y");
					var useNums = prompt("Include Numeric Y/N ? ", "Y");
					var useSpecial = prompt("Include Special Characters Y/N ? ", "Y");
					if (PwLengthVal > 95) {
						results.push(...results);
					}
					if (useLwrCase === "Y") {
						results.push(...lwrCaseVal);
					}

					if (useUpperCase === "Y") {
						results.push(...upCaseVal);
					}

					if (useNums === "Y") {
						results.push(...incNumVal);
					}

					if (useSpecial === "Y") {
						results.push(...SpecialVal);
					}
					generatePw(results, PwLengthVal);
				} else if (
					PwLengthVal != null &&
					PwLengthVal < 8 &&
					PwLengthVal > 128
				) {
					console.log("too high or too low");
					outOfRangeOrCancel();
				}
				// If Cancelled or Length is out of range
				else {
					outOfRangeOrCancel();
				}
				// return PwLengthVal;
			}
			// Ask User if lower case should be included
			// function lwrCase() {
			// 	var lwrCaseVal = prompt("Include Lowercase Y/N ? ", "Y");
			// 	// Create Lowercase array
			// 	if (lwrCaseVal != null && lwrCaseVal === "Y") {
			// 		lwrCaseVal = range("a", "z");
			// 		// Evoke Next Uppercase Criteria
			// 		upCase();
			// 	}
			// 	if (lwrCaseVal != null && lwrCaseVal === "N") {
			// 		upCase();
			// 	} else {
			// 		outOfRangeOrCancel();
			// 	}
			// 	return lwrCaseVal;
			// }
			// Ask User if upper case should be included
			// function upCase() {
			// 	var upCaseVal = prompt("Include Uppercase Y/N ? ", "Y");
			// 	if (upCaseVal != null && upCaseVal === "Y") {
			// 		upCaseVal = range("A", "Z");
			// 		// Evoke Next Numeric Criteria
			// 		incNum();
			// 	}
			// 	if (upCaseVal != null && upCaseVal === "N") {
			// 		incNum();
			// 	} else {
			// 		outOfRangeOrCancel();
			// 	}
			// }
			// Ask user if we should include Numeric Values
			// function incNum() {
			// 	var incNumVal = prompt("Include Numeric Y/N ? ", "Y");
			// 	if (incNumVal != null && incNumVal === "Y") {
			// 		incNumVal = range("0", "9");
			// 		// Evoke Next Criteria
			// 		SpecialChar();
			// 	}
			// 	if (incNumVal != null && incNumVal === "N") {
			// 		SpecialChar();
			// 	} else {
			// 		outOfRangeOrCancel();
			// 	}
			// }
			// Ask user if we should include Special  Char
			// function SpecialChar() {
			// 	var SpecialVal = prompt("Include Special Characters Y/N ? ", "Y");
			// 	if (SpecialVal != null && SpecialVal === "Y") {
			// 		SpecialVal = range(" ", "/").concat(
			// 			range(":", "@"),
			// 			range("[", "`"),
			// 			range("{", "~")
			// 		);
			// 		// Generate Password
			// 		generatePw();
			// 	}
			// 	if (SpecialVal != null && SpecialVal === "N") {
			// 		generatePw();
			// 	} else {
			// 		outOfRangeOrCancel();
			// 	}
			// }

			function generatePw(results, PwLengthVal) {
				console.log(results);

				function shuffle(array) {
					array.sort(() => Math.random() - 0.5);
				}

				shuffle(results);
				console.log(results.slice(0, PwLengthVal).join(""));
				document.getElementById("demo").innerHTML =
					"Password: " + results.slice(0, PwLengthVal).join("");
			}

			function outOfRangeOrCancel() {
				document.getElementById("demo").innerHTML =
					"Ops!! You either selected Cancel,a password length selected our side the range: 8(min) / 128(max) or answered a question with something other than 'Y' or 'N'";
			}

			function range(start, stop) {
				var result = [];
				for (
					var idx = start.charCodeAt(0), end = stop.charCodeAt(0);
					idx <= end;
					++idx
				) {
					result.push(String.fromCharCode(idx));
				}
				return result;
			}
		</script>
	</head>
	<body>
		<h1>Password Generator</h1>

		<button type="button" onclick="RunPWGen()">
			Create Password
		</button>
		<p id="demo"></p>
	</body>
</html>
